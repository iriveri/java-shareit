CREATE TABLE IF NOT EXISTS  "user" (
  "id" bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "name" VARCHAR(255),
  "email" VARCHAR(512),
  CONSTRAINT pk_user PRIMARY KEY ("id"),
  CONSTRAINT UQ_USER_EMAIL UNIQUE ("email")
);

CREATE TABLE IF NOT EXISTS "item" (
  "id" bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "ownerId" bigint,
  "name" VARCHAR(255),
  "description" text,
  "available" bool,
  CONSTRAINT pk_item PRIMARY KEY ("id"),
  CONSTRAINT fk_owner FOREIGN KEY ("ownerId") REFERENCES "user" ("id")
);

CREATE TABLE IF NOT EXISTS "review" (
  "id" bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  "userId" bigint,
  "itemId" bigint,
  "rating" smallint,
  "description" text,
  CONSTRAINT pk_review PRIMARY KEY ("id"),
  CONSTRAINT fk_review_user FOREIGN KEY ("userId") REFERENCES "user" ("id"),
  CONSTRAINT fk_review_item FOREIGN KEY ("itemId") REFERENCES "item" ("id")
);

